"use strict";function iframeGenerator(){var e=document.querySelectorAll(".ifram-data").length>0?document.querySelectorAll(".ifram-data"):null;null!=e&&e.forEach(function(e){var t=document.createElement("iframe");t.frameBorder=e.dataset.frameborder,t.src=e.dataset.src,t.scrolling=e.dataset.scrolling,t.title=e.dataset.title,t.width=e.dataset.width,t.height=e.dataset.height,t.id=e.dataset.id,e.parentNode.insertBefore(t,e.nextElementSibling)})}function isVisible(e){var t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom;return!!(t>=0&&n<=window.innerHeight)}function getSiblings(e){for(var t=[],n=e.parentNode.firstChild;n;n=n.nextSibling)1===n.nodeType&&n!==e&&t.push(n);return t}function isScrolledIntoView(e,t){isVisible(e)&&-1===arr.indexOf(e)&&(arr.push(e),t(e))}function checkVisible(e){var t=document.getElementById(e),n=t.getBoundingClientRect(),i=t.querySelector("#last").getBoundingClientRect(),r={};if(r.top=i.top-n.top,r.right=i.right-n.right,r.bottom=i.bottom-n.bottom,r.left=i.left-n.left,Math.abs(r.right)<=n.width)return r.left}function sliderStep(e,t){e.style.transform="translate3d("+t+"px, 0px, 0px)",e.style.webkitTransform="translate3d("+t+"px, 0px, 0px)",e.style.MozTransform="translate3d("+t+"px, 0px, 0px)",e.style.msTransform="translate3d("+t+"px, 0px, 0px)",e.setAttribute("step",t)}function transitionEndEventName(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e]}function moveOneStep(e){function t(e){var t=e.touches[0];f.sX=t.screenX}var n=e.querySelector(".slider"),i=n.children,r=n.querySelector(".active"),a=Array.prototype.indexOf.call(i,r),o=0,s=e.querySelector("#next"),c=e.querySelector("#prev"),l=e.querySelector("#last");if(r){for(var d=0;d<a-1;d++)o+=i[d].offsetWidth;sliderStep(n,o);var u=a-1,f={};f.sX=0,f.eX=0;n.addEventListener("touchstart",t,!1),n.addEventListener("touchmove",function(e){var t=e.touches[0];f.eX=t.screenX},!1),n.addEventListener("touchend",function(r){var a=checkVisible(e.id),s=o+i[u].offsetWidth;if(f.eX-20>f.sX||f.eX+20<f.sX)if(f.eX>f.sX)if(a){n.removeEventListener("touchMove",t);var c=parseInt(n.getAttribute("step"))+Math.abs(l.getBoundingClientRect().left);sliderStep(n,c)}else u<i.length-1&&(o=s,sliderStep(n,s),u+=1);else if(u>=1){var d=o-i[u-=1].offsetWidth;o=d,sliderStep(n,d)}},!1),s.addEventListener("click",function(t){!0===e.querySelector("#prev").disabled&&(e.querySelector("#prev").disabled=!1);l.getBoundingClientRect();var r=o+i[u].offsetWidth;o=r,u+=1;if(checkVisible(e.id))e.querySelector("#next").disabled=!0;else{var a=transitionEndEventName();n.addEventListener(a,function(){if(checkVisible(e.id)){var t=r+Math.abs(checkVisible(e.id));sliderStep(n,t),e.querySelector("#next").disabled=!0}}),sliderStep(n,r),e.querySelector("#next").disabled=!0,setTimeout(function(){e.querySelector("#next").disabled=!1},250)}},!1),c.addEventListener("click",function(t){if((u-=1)>0){!0===e.querySelector("#next").disabled&&(e.querySelector("#next").disabled=!1);var r=o-i[u].offsetWidth;sliderStep(n,r),o=r,e.querySelector("#prev").disabled=!0,setTimeout(function(){e.querySelector("#prev").disabled=!1},250)}else 0===u&&(r=o-i[u].offsetWidth,sliderStep(n,r),o=r,e.querySelector("#prev").disabled=!0)},!1)}else console.log("please set active")}function rotateForward(){var e=Carousel.carousel,t=e.children,n=t[0],i=t[t.length-1];e.insertBefore(i,n)}function rotateBackward(){var e=Carousel.carousel,t=e.children,n=t[0],i=t[t.length-1];e.insertBefore(n,i.nextSibling)}function animate(e,t,n){Carousel.wrapper;var i=Carousel.carousel,r=t-e,a=Carousel.duration,o=Date.now();i.style.top=e+"px";var s=window.setInterval(function(){var t=Date.now()-o;if(t>=a)return window.clearInterval(s),void n();var c=e+((t/=a/2)<1?r/2*Math.pow(t,3):r/2*(Math.pow(t-2,3)+2));i.style.top=c+"px"},1e3/60)}function iniSearchAutoComplete(){$.widget("custom.catcomplete",$.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(e,t){var n=this,i="";e.append('<li class="search_news"><a>البحث في الأخبار</a></li>'),$.each(t,function(t,r){var a;r.category!=i&&(e.append("<li class='ui-autocomplete-category'>"+r.category+"</li>"),i=r.category),a=n._renderItemData(e,r),r.category&&(a.attr("aria-label",r.category+" : "+r.label),a.attr("aria-link",r.url))})}})}function loadSearch(){var e;$(".section-aswaq .search-input").catcomplete({delay:0,source:function(t,n){var i=new RegExp(t.term,"i");e&&e.abort(),e=$.ajax({url:"/.resources/aa-templating-lm/webresources/static/aswaq/market-data.json",dataType:"json",cache:!1,success:function(e){var t=$.map(e.list,function(e){if(i.test(e.label))return{label:e.label,category:e.category,url:e.url}});0==t.length&&(t=[{label:"",category:"",url:""}]),n(t)}})},minlength:0,select:function(e,t){if(console.log("select"),void 0===t.item){var n=$(".section-aswaq .search-input").val();window.location.href=seartchPageLink+"?lang=ar&q="+n}else window.location.href=t.item.url}})}!function(){function e(e){e.preventDefault(),l.classList.toggle("noscroll"),g.classList.toggle("show"),c.classList.toggle("overflowfix")}function t(e){27==(e=e||window.event).keyCode&&g.classList.contains("show")&&(l.classList.remove("noscroll"),g.classList.remove("show"),c.classList.remove("overflowfix"))}function n(e,t){if(t){var n=document.createElement(e);return n.setAttribute("class",t),n}return document.createElement(e)}function i(e,t){return e.appendChild(t)}function r(e,t){return e.length===t.length&&e.sort().every(function(e,n){return function(e,t){return JSON.stringify(e)===JSON.stringify(t)}(e,t.sort()[n])})}function a(){var e=document.querySelectorAll(".latest-news-js");if(e.length>0&&"undefined"!=typeof latestNewsFeed){var t="undefined"==typeof latestNewsLimit?6:latestNewsLimit,a=new XMLHttpRequest;a.open("GET",latestNewsFeed,!0),a.send(),a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=JSON.parse(this.responseText).latestEvents;r(a,B)||(B=a,e.forEach(function(e){var r=e.querySelector("ul");r.innerHTML="";for(var o=0;o<t;o++){var s=n("li"),c=n("span"),l=n("span","time"),d=n("span"),u=n("span","region"),f=n("span","ttl");c.classList.add("latest-news__wrapper"),d.innerText=a[o].creationDate.split("-")[1],u.innerText="GMT",f.innerText=a[o].text,i(l,d),i(l,u),i(c,l),i(c,f),i(s,c),i(r,s)}}))}}}}var o=document.querySelector(".mobile-menu"),s=document.querySelector(".overlay"),c=document.querySelector("nav .main-content"),l=(c.querySelector("main-content"),document.getElementById("slider"),document.querySelector("body")),d=document.querySelectorAll(".menu-icon"),u=document.querySelectorAll(".submenu"),f=(document.querySelector(".submenu.current-section"),document.querySelectorAll(".btn-search")),g=document.querySelector(".search-overlay"),v=document.querySelector(".search-overlay .close"),m=document.querySelector(".mobile-search"),h=document.querySelector(".font-resize"),p=document.querySelector("article"),w=document.querySelector(".breaking-news"),y=document.querySelector(".breaking-news p"),L=document.querySelector(".mega-menu"),b=document.getElementById("main-video");if(o.addEventListener("click",function(){s.classList.toggle("show"),c.classList.toggle("show"),o.classList.toggle("cross"),l.classList.toggle("noscroll")}),s.addEventListener("touchstart",function(e){e.preventDefault(),s.classList.toggle("show"),c.classList.toggle("show"),o.classList.toggle("cross"),l.classList.toggle("noscroll")},!1),d.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),L.classList.toggle("show"),this.classList.toggle("active")})},!1),f.forEach(function(t){void 0!==t&&null!==t&&t.addEventListener("click",e,!1)}),m.addEventListener("click",e,!1),document.addEventListener("keyup",function(e){g.classList.contains("show")?document.addEventListener("keyup",t,!1):document.removeEventListener("keyup",t)},!1),v.addEventListener("click",function(e){e.preventDefault(),g.classList.remove("show"),l.classList.remove("noscroll"),c.classList.remove("overflowfix")}),h&&h.addEventListener("click",function(e){e.preventDefault(),p.classList.toggle("bigger")}),(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Firefox/i))&&u.forEach(function(e){e.addEventListener("click",function(e){if("a"!==e.target.tagName.toLowerCase()){e.preventDefault(),e.stopPropagation(),this.classList.toggle("active");for(var t=getSiblings(this),n=0;n<t.length;n++)t[n].classList.contains("active")&&t[n].classList.remove("active")}},!1)}),b)var S=b.getBoundingClientRect().top,x=Math.floor(S+b.offsetHeight+window.pageYOffset);window.addEventListener("scroll",function(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.match(/Android/i)||navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.match(/webOS/i));else{var e=document.querySelector("header"),t=(document.querySelector("h1.logo"),document.querySelector("header nav"));window.pageYOffset>10?e.classList.add("sticky"):e.classList.remove("sticky"),window.pageYOffset>70?t.setAttribute("style","top="+window.pageYOffset+"px"):(t.classList.remove("moveR"),l.classList.remove("margintop")),window.pageYOffset>190?(t.classList.add("moveR"),l.classList.add("margintop")):(t.classList.remove("moveR"),l.classList.remove("margintop")),window.pageYOffset>190?(t.classList.add("moveD"),l.classList.add("margintop")):t.classList.remove("moveD"),L.classList.contains("show")&&(L.classList.remove("show"),d.forEach(function(e){e.classList.remove("active")})),b&&(window.pageYOffset>x&&b.classList.add("video-sticky"),window.pageYOffset<x-200&&b.classList.remove("video-sticky"))}}),window.onload=setTimeout(function(){["slider","dateSlider","slider1"].forEach(function(e){var t=document.getElementById(e);t&&(isVisible(t)?moveOneStep(t):window.onscroll=function(){isScrolledIntoView(t,moveOneStep)})})},0);var A=new XMLHttpRequest,E="",k="";A.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);""!=(E=e.result.text)?E!=k&&(y.innerText=E,w.classList.add("show"),k=E):w.classList.contains("show")&&w.classList.remove("show")}};var q="undefined"!=typeof breakingnewsLink?breakingnewsLink:"https://feed.alarabiya.net/breakingNews/ar.json";A.open("GET",q,!0),A.send(),setInterval(function(){A.open("GET",q,!0),A.send()},3e4);var C=document.querySelector(".search-icon");C&&C.addEventListener("click",function(e){e.preventDefault(),document.getElementById("search-form").submit()});var $=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),O=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.match(/Android/i)||navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.match(/webOS/i));if(!$&&!O){var T=document.querySelectorAll(".teaser-video")||"";T.length>0&&T.forEach(function(e){var t,n=e.querySelector("video");e.addEventListener("mouseenter",function(i){t&&clearInterval(t);var r=e.dataset.video;n.src=r,n.play(),n.muted=!0,e.classList.add("playing"),t=setInterval(function(){n.pause(),n.currentTime=0,e.classList.remove("playing")},3e3)}),e.addEventListener("mouseleave",function(i){n.pause(),n.currentTime=0,e.classList.remove("playing"),t&&clearInterval(t)})})}var B=[];"undefined"!=typeof latestNewsFeed&&(a(),setInterval(function(){a()},3e4))}();var arr=[];$(document).ready(function(){$(".font-resize a, .prnt a").removeAttr("href"),$(".tabs-menu a").click(function(e){e.preventDefault(),$(this).parent().addClass("current"),$(this).parent().siblings().removeClass("current");var t=$(this).attr("href");$(this).parent().parent().siblings(".tab").children().not(t).css("display","none"),$(t).fadeIn()}),$(".aa-live .close-btn").click(function(){$(".aa-live").addClass("hide-live")}),$(".live-open").click(function(){$(".aa-live").removeClass("hide-live")}),$("article .teaser-tools .share").click(function(){$(this).toggleClass("show-icons")})});var Carousel={duration:300};window.onload=function(){try{var e=Carousel.carousel=document.getElementById("ver-carousel"),t=e.getElementsByTagName("li"),n=t.length,i=Carousel.width;t.height;e.style.width=i+"px";for(var r=0;r<n;++r)t[r];Carousel.rowHeight=e.getElementsByTagName("li")[0].offsetHeight,e.style.visibility="visible";var a=Carousel.wrapper=document.createElement("div");a.id="carouselWrapper",a.style.width=e.offsetWidth+"px",a.style.height=e.offsetHeight+"px",e.parentNode.insertBefore(a,e),a.appendChild(e);var o=document.getElementById("caro-prev"),s=document.getElementById("caro-next");o.onclick=function(){o.disabled=s.disabled=!0,rotateForward(),animate(-Carousel.rowHeight,0,function(){e.style.top="0",o.disabled=s.disabled=!1})},s.onclick=function(){o.disabled=s.disabled=!0,animate(0,-Carousel.rowHeight,function(){rotateBackward(),e.style.top="0",o.disabled=s.disabled=!1})}}catch(e){console.log("error in windowLoad"+e.message)}try{iframeGenerator(),iFrameResize({log:!1,checkOrigin:!1})}catch(e){console.log("error in initalizing Iframes"+e.message)}},$(document).ready(function(){try{$(".section-aswaq  .search-input").length&&(iniSearchAutoComplete(),loadSearch())}catch(e){console.log(e.message)}}),$(document).ready(function(){$(window).scroll(function(){$(document).scrollTop()>=$("header.sticky").height()?($(".takeover_outer").addClass("fixed"),$(".takeover_outer").css("top","64px")):($(".takeover_outer").removeClass("fixed"),$(".takeover_outer").css("top","262px"),$(".section-page .takeover_outer").css("top","325px"))})});var isMobile=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.match(/Android/i)||navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.match(/webOS/i)),debounce=function(e){return setTimeout(function(){var t=window.pageYOffset;e.forEach(function(e){if(e.offsetTop<window.innerHeight+t){var n=isMobile?e.dataset.srcMobile:e.dataset.srcDisktop;e.src=n,e.classList.remove("lazy")}})},20)};document.addEventListener("DOMContentLoaded",function(){function e(){t&&clearTimeout(t),t=debounce(n)}var t,n=document.querySelectorAll("img.lazy");n.forEach(function(t){isVisible(t)&&e()}),document.addEventListener("scroll",e),window.addEventListener("resize",e),window.addEventListener("orientationChange",e),0==n.length&&(document.removeEventListener("scroll",e),window.removeEventListener("resize",e),window.removeEventListener("orientationChange",e))}),$(document).ready(function(){if($("ul.tm-nav li").on("click",function(){$(this).parent().find("li.active").removeClass("active"),$(this).addClass("active")}),$(".tm-sequence ul li a").click(function(e){e.preventDefault();var t=$($(this).attr("href"));if(t.length){var n=t.offset().top;$("body, html").animate({scrollTop:n-90+"px"},600)}}),$(".tm-sequence").length>0){var e=$(window),t=$(".tm-sequence"),n=t.innerHeight(),i=$("footer").offset().top,r=t.offset();e.scroll(function(){e.scrollTop()>r.top?t.addClass("fixed"):t.removeClass("fixed"),e.scrollTop()+n>i?t.css({top:-(e.scrollTop()+n-i)}):t.css({top:"80"})})}});