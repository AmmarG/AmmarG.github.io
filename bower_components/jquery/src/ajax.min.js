define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseXML","./event/trigger","./deferred","./serialize"],function(e,t,a,r,n,o){"use strict";function s(t){return function(r,n){"string"!=typeof r&&(n=r,r="*");var o,s=0,i=r.toLowerCase().match(a)||[];if(e.isFunction(n))for(;o=i[s++];)"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(n)):(t[o]=t[o]||[]).push(n)}}function i(t,a,r,n){function o(c){var d;return s[c]=!0,e.each(t[c]||[],function(e,t){var c=t(a,r,n);return"string"!=typeof c||i||s[c]?i?!(d=c):void 0:(a.dataTypes.unshift(c),o(c),!1)}),d}var s={},i=t===y;return o(a.dataTypes[0])||!s["*"]&&o("*")}function c(t,a){var r,n,o=e.ajaxSettings.flatOptions||{};for(r in a)void 0!==a[r]&&((o[r]?t:n||(n={}))[r]=a[r]);return n&&e.extend(!0,t,n),t}var d=/%20/g,f=/#.*$/,p=/([?&])_=[^&]*/,u=/^(.*?):[ \t]*([^\r\n]*)$/gm,l=/^(?:GET|HEAD)$/,h=/^\/\//,x={},y={},m="*/".concat("*"),g=t.createElement("a");return g.href=r.href,e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:r.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(r.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":m,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,a){return a?c(c(t,e.ajaxSettings),a):c(e.ajaxSettings,t)},ajaxPrefilter:s(x),ajaxTransport:s(y),ajax:function(s,c){function v(t,a,r,n){var o,s,i,c,d,f=a;H||(H=!0,S&&window.clearTimeout(S),j=void 0,w=n||"",J.readyState=t>0?4:0,o=t>=200&&t<300||304===t,r&&(c=function(e,t,a){for(var r,n,o,s,i=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(n in i)if(i[n]&&i[n].test(r)){c.unshift(n);break}if(c[0]in a)o=c[0];else{for(n in a){if(!c[0]||e.converters[n+" "+c[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),a[o]}(q,J,r)),c=function(e,t,a,r){var n,o,s,i,c,d={},f=e.dataTypes.slice();if(f[1])for(s in e.converters)d[s.toLowerCase()]=e.converters[s];for(o=f.shift();o;)if(e.responseFields[o]&&(a[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=f.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=d[c+" "+o]||d["* "+o]))for(n in d)if((i=n.split(" "))[1]===o&&(s=d[c+" "+i[0]]||d["* "+i[0]])){!0===s?s=d[n]:!0!==d[n]&&(o=i[0],f.unshift(i[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(q,c,J,o),o?(q.ifModified&&((d=J.getResponseHeader("Last-Modified"))&&(e.lastModified[T]=d),(d=J.getResponseHeader("etag"))&&(e.etag[T]=d)),204===t||"HEAD"===q.type?f="nocontent":304===t?f="notmodified":(f=c.state,s=c.data,o=!(i=c.error))):(i=f,!t&&f||(f="error",t<0&&(t=0))),J.status=t,J.statusText=(a||f)+"",o?E.resolveWith(D,[s,f,J]):E.rejectWith(D,[J,f,i]),J.statusCode(N),N=void 0,M&&F.trigger(o?"ajaxSuccess":"ajaxError",[J,q,o?s:i]),O.fireWith(D,[J,f]),M&&(F.trigger("ajaxComplete",[J,q]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof s&&(c=s,s=void 0),c=c||{};var j,T,w,b,S,C,H,M,L,R,q=e.ajaxSetup({},c),D=q.context||q,F=q.context&&(D.nodeType||D.jquery)?e(D):e.event,E=e.Deferred(),O=e.Callbacks("once memory"),N=q.statusCode||{},k={},A={},$="canceled",J={readyState:0,getResponseHeader:function(e){var t;if(H){if(!b)for(b={};t=u.exec(w);)b[t[1].toLowerCase()]=t[2];t=b[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return H?w:null},setRequestHeader:function(e,t){return null==H&&(e=A[e.toLowerCase()]=A[e.toLowerCase()]||e,k[e]=t),this},overrideMimeType:function(e){return null==H&&(q.mimeType=e),this},statusCode:function(e){var t;if(e)if(H)J.always(e[J.status]);else for(t in e)N[t]=[N[t],e[t]];return this},abort:function(e){var t=e||$;return j&&j.abort(t),v(0,t),this}};if(E.promise(J),q.url=((s||q.url||r.href)+"").replace(h,r.protocol+"//"),q.type=c.method||c.type||q.method||q.type,q.dataTypes=(q.dataType||"*").toLowerCase().match(a)||[""],null==q.crossDomain){C=t.createElement("a");try{C.href=q.url,C.href=C.href,q.crossDomain=g.protocol+"//"+g.host!=C.protocol+"//"+C.host}catch(e){q.crossDomain=!0}}if(q.data&&q.processData&&"string"!=typeof q.data&&(q.data=e.param(q.data,q.traditional)),i(x,q,c,J),H)return J;(M=e.event&&q.global)&&0==e.active++&&e.event.trigger("ajaxStart"),q.type=q.type.toUpperCase(),q.hasContent=!l.test(q.type),T=q.url.replace(f,""),q.hasContent?q.data&&q.processData&&0===(q.contentType||"").indexOf("application/x-www-form-urlencoded")&&(q.data=q.data.replace(d,"+")):(R=q.url.slice(T.length),q.data&&(T+=(o.test(T)?"&":"?")+q.data,delete q.data),!1===q.cache&&(T=T.replace(p,""),R=(o.test(T)?"&":"?")+"_="+n+++R),q.url=T+R),q.ifModified&&(e.lastModified[T]&&J.setRequestHeader("If-Modified-Since",e.lastModified[T]),e.etag[T]&&J.setRequestHeader("If-None-Match",e.etag[T])),(q.data&&q.hasContent&&!1!==q.contentType||c.contentType)&&J.setRequestHeader("Content-Type",q.contentType),J.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+m+"; q=0.01":""):q.accepts["*"]);for(L in q.headers)J.setRequestHeader(L,q.headers[L]);if(q.beforeSend&&(!1===q.beforeSend.call(D,J,q)||H))return J.abort();if($="abort",O.add(q.complete),J.done(q.success),J.fail(q.error),j=i(y,q,c,J)){if(J.readyState=1,M&&F.trigger("ajaxSend",[J,q]),H)return J;q.async&&q.timeout>0&&(S=window.setTimeout(function(){J.abort("timeout")},q.timeout));try{H=!1,j.send(k,v)}catch(e){if(H)throw e;v(-1,e)}}else v(-1,"No Transport");return J},getJSON:function(t,a,r){return e.get(t,a,r,"json")},getScript:function(t,a){return e.get(t,void 0,a,"script")}}),e.each(["get","post"],function(t,a){e[a]=function(t,r,n,o){return e.isFunction(r)&&(o=o||n,n=r,r=void 0),e.ajax(e.extend({url:t,type:a,dataType:o,data:r,success:n},e.isPlainObject(t)&&t))}}),e});