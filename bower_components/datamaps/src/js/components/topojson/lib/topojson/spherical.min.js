function formatDistance(a){var t=6371*a;return(t>1?t.toFixed(3)+"km":(1e3*t).toPrecision(3)+"m")+" ("+(180*a/Math.PI).toPrecision(3)+"°)"}function ringArea(a){if(!a.length)return 0;for(var t=1,n=0,r=a[0],s=r[0]*radians,i=r[1]*radians/2+π_4,e=s,h=Math.cos(i),o=Math.sin(i),M=1,c=a.length;M<c;++M){s=(r=a[M])[0]*radians,i=r[1]*radians/2+π_4;var d=s-e,u=Math.cos(i),f=Math.sin(i),v=o*f,l=t,A=n,g=h*u+v*Math.cos(d),x=v*Math.sin(d);t=l*g-A*x,n=A*g+l*x,e=s,h=u,o=f}return 2*Math.atan2(n,t)}function absoluteArea(a){return a<0?a+4*π:a}function triangleArea(a){var t=distance(a[0],a[1]),n=distance(a[1],a[2]),r=distance(a[2],a[0]),s=(t+n+r)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(s/2)*Math.tan((s-t)/2)*Math.tan((s-n)/2)*Math.tan((s-r)/2))))}function distance(a,t){var n,r=(t[0]-a[0])*radians,s=Math.sin(r),i=Math.cos(r),e=Math.sin(a[1]*radians),h=Math.cos(a[1]*radians),o=Math.sin(t[1]*radians),M=Math.cos(t[1]*radians);return Math.atan2(Math.sqrt((n=M*s)*n+(n=h*o-e*M*i)*n),e*o+h*M*i)}function haversinDistance(a,t,n,r){return a*=radians,t*=radians,n*=radians,r*=radians,2*Math.asin(Math.sqrt(haversin(r-t)+Math.cos(t)*Math.cos(r)*haversin(n-a)))}function haversin(a){return(a=Math.sin(a/2))*a}var π=Math.PI,π_4=π/4,radians=π/180;exports.name="spherical",exports.formatDistance=formatDistance,exports.ringArea=ringArea,exports.absoluteArea=absoluteArea,exports.triangleArea=triangleArea,exports.distance=haversinDistance;